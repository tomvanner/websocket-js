<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Web Socket Client</title>
        <script>
            const messages = document.getElementById("messages");
            const socket = new WebSocket("http://localhost:8000");
            socket.onopen = e => console.log("Websocket connected");
            socket.onmessage = msg => {
                if (!msg?.data) {
                    return;
                }
                
                const messageElem = document.createElement("div");
                messageElem.textContent = msg.data;

                const messagesContainer = document.getElementById("messages");
                messagesContainer.append(messageElem);
            };
            socket.onerror = err => console.log(err);
            socket.onclose = err => console.log("Websocket disconnected");

            function sendMessage() {
                socket.send("Here's some text that the server is urgently awaiting!");
            }
        </script>
    </head>

    <body>
        <div id="messages"></div>
        <button onclick="sendMessage()">Send</button>
    </body>
</html>